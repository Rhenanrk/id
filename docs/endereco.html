<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="author" content="Fábio Nogueira de Lucena">
  <link rel="shortcut icon" href="favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ABNT 15985</title>
  <meta name="description" content="Apresentação detalhada da norma ABNT NBR 15985:2011">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/bulma.min.css">
  <link rel="stylesheet" href="css/tooltip.css">
</head>

<body onhashchange="changeToUrl();">
  <script>
    var corrente;
    window.onload = function() {
      corrente = document.getElementById('visao-geral');
      corrente.style.display = "block";


      paises('paises-endereco');
    }

    function mostre(c) {
      corrente.style.display = "none";
      var exiba = document.getElementById(c);
      exiba.style.display = "block";
      corrente = exiba;
    }

    function changeToUrl() {
      /* Retira # */
      var goTo = location.hash.substring(1);
      mostre(goTo ? goTo : 'visao-geral');
    }

    document.addEventListener('DOMContentLoaded', function() {

      // Get all "navbar-burger" elements
      var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

      // Check if there are any navbar burgers
      if ($navbarBurgers.length > 0) {

        // Add a click event on each of them
        $navbarBurgers.forEach(function($el) {
          $el.addEventListener('click', function() {

            // Get the target from the "data-target" attribute
            var target = $el.dataset.target;
            var $target = document.getElementById(target);

            // Toggle the class on both the "navbar-burger" and the "navbar-menu"
            $el.classList.toggle('is-active');
            $target.classList.toggle('is-active');

          });
        });
      }

    });

    function veja(d) {
      /* Exibir a div */
      var elementos = document.getElementsByClassName('parcial');
      var i;
      for (i = 0; i < elementos.length; i++) {
        elementos[i].style.display = 'none';
      }

      var corrente = document.getElementById(d);
      corrente.style.display = 'block';

      /* Atualizar feedback da tab selecionada */
      elementos = document.getElementsByClassName('li-parcial');
      for (i = 0; i < elementos.length; i++) {
        elementos[i].className = 'li-parcial';
      }

      corrente = document.getElementById('li-' + d);
      corrente.className = 'li-parcial is-active';
    }

    function atualizaMunicipios() {
      var elemento = document.getElementById('estados');
      var estado = elemento.options[elemento.selectedIndex].text;
      var municipioLabel = document.getElementById('municipio-label');
      municipioLabel.textContent = estado + " (municípios)";

      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          var json = JSON.parse(this.responseText);
          var tamanho = json.length;
          var i;

          /* elimina opções existentes */
          var municipios = document.getElementById('municipios');
          municipios.options.length = 0;

          /* insere municípios do estado selecionado */
          for (i = 0; i < tamanho; i++) {
            var opcao = document.createElement('option');
            var componente = json[i];
            if (componente.estado == estado) {
              opcao.text = componente.municipio;
              opcao.value = componente.codigo;
              municipios.add(opcao, municipios[i]);
            }
          }
        }
      };
      xhttp.open("GET", "js/municipios.json", true);
      xhttp.send();
    }
    
    function municipiosEndereco() {
      var elemento = document.getElementById('estados');
      var estado = elemento.options[elemento.selectedIndex].text;
      
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          var json = JSON.parse(this.responseText);
          var tamanho = json.length;
          var i;

          /* elimina opções existentes */
          var municipios = document.getElementById('municipios-endereco');
          municipios.options.length = 0;

          /* insere municípios do estado selecionado */
          for (i = 0; i < tamanho; i++) {
            var opcao = document.createElement('option');
            var componente = json[i];
            if (componente.estado == estado) {
              opcao.text = componente.municipio;
              opcao.value = componente.codigo;
              municipios.add(opcao, municipios[i]);
            }
          }
        }
      };
      xhttp.open("GET", "js/municipios.json", true);
      xhttp.send();
    }

    function paises(chave) {
      var elemento = document.getElementById(chave);

      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          var json = JSON.parse(this.responseText);
          var tamanho = json.length;
          var i;

          /* insere países */
          for (i = 0; i < tamanho; i++) {
            var opcao = document.createElement('option');
            var componente = json[i];
            opcao.text = componente.pais;
            opcao.value = componente.cod;
            elemento.add(opcao, elemento[i]);
          }
        }
      };
      xhttp.open("GET", "js/paises.json", true);
      xhttp.send();
    }

    function nacionalidade() {
      var db = document.getElementById('db');
      var de = document.getElementById('de');

      var elemento = document.getElementById('brasileira');
      if (elemento.checked) {
        db.style.display = "block";
        de.style.display = "none";
      } else {
        db.style.display = "none";
        de.style.display = "block";
      }
    }

    function brasilOutro() {
      var brasil = document.getElementById('detalhe-brasil');
      var outro = document.getElementById('detalhe-outro');

      var elemento = document.getElementById('brasil');
      if (elemento.checked) {
        brasil.style.display = "block";
        outro.style.display = "none";
      } else {
        brasil.style.display = "none";
        outro.style.display = "block";
      }
    }
  </script>
  <section class="section" id="visao-geral"></section>

  

</body>

</html>
